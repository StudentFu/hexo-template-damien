---
title: 【Linux教程学习笔记】18.Linux网络配置
date: 2018-11-20 17:33:43
tags: 
	- linux
categories: 操作系统
---
# 分区基础知识
## mbr分区
- 最多支持四个主分区
- 系统只能安装在主分区
- 扩展分区要占一个主分区
- MBR最大只支持2TB，但拥有最好的兼容性
## gtp分区
- 支持无限多个主分区（但操作系统可能限制，比如windows下最多128个分区）
- 最大支持18EB的大容量（1EB=1024 PB，1PB=1024 TB ）
- windows7 64位以后支持gtp
## windows下的磁盘分区
![image](http://image.damienzhong.com/windows%E4%B8%8B%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA.png)
# Linux分区
## 原理介绍
- Linux来说无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构, Linux中每个分区都是用来组成整个文件系统的一部分。
- Linux采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得。
## 硬盘说明
- Linux硬盘分IDE硬盘和SCSI硬盘，目前基本上是SCSI硬盘
- 对于IDE硬盘，驱动器标识符为“hdx~”,其中“hd”表明分区所在设备的类型，这里是指IDE硬盘了。“x”为盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘）,“~”代表分区，前四个分区用数字1到4表示，它们是主分区或扩展分区，从5开始就是逻辑分区。例，hda3表示为第一个IDE硬盘上的第三个主分区或扩展分区,hdb2表示为第二个IDE硬盘上的第二个主分区或扩展分区。
- 对于SCSI硬盘则标识为“sdx~”，SCSI硬盘是用“sd”来表示分区所在设备的类型的，其余则和IDE硬盘的表示方法一样。
## 查看所有设备挂载情况
命令：lsblk 或者lsblk -f

![image](http://image.damienzhong.com/%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E6%8C%82%E8%BD%BD%E6%83%85%E5%86%B5.png)
![image](http://image.damienzhong.com/linux%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98.png)
# 挂载的经典案例
## 说明
下面我们以增加一块硬盘为例来熟悉下磁盘的相关指令和深入理解磁盘分区、挂载、卸载的概念。
### 如何增加一块硬盘
- 虚拟机添加硬盘
- 分区
- 格式化
- 挂载
- 设置可以自动挂载。
### 虚拟机增加硬盘步骤1
在【虚拟机】菜单中，选择【设置】，然后设备列表里添加硬盘，然后一路【下一步】，中间只有选择磁盘大小的地方需要修改，至到完成。然后重启系统（才能识别）！

![image](http://image.damienzhong.com/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%A2%9E%E5%8A%A0%E7%A1%AC%E7%9B%98%E6%AD%A5%E9%AA%A41.png)
### 虚拟机增加硬盘步骤2
- 分区命令fdisk /dev/sdb
- 开始对/sdb分区
  - m 显示命令列表
  - p 显示磁盘分区同fdisk –l
  - n 新增分区
  - d 删除分区
  - w 写入并退出
- **说明**：开始分区后输入n，新增分区，然后选择p ，分区类型为主分区。两次回车默认剩余全部空间。最后输入w写入分区并退出，若不保存退出输入q。

![image](http://image.damienzhong.com/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%A2%9E%E5%8A%A0%E7%A1%AC%E7%9B%98%E6%AD%A5%E9%AA%A42.png)
### 虚拟机增加硬盘步骤3
- 格式化磁盘
- 分区命令:mkfs -t ext4 /dev/sdb1
- 其中ext4是分区类型
### 虚拟机增加硬盘步骤4
挂载: 将一个分区与一个目录联系起来
- mount 设备名称挂载目录
  - 例如：mount /dev/sdb1 /newdisk
- umount设备名称或者挂载目录
  - 例如：umount/dev/sdb1 或者umount/newdisk
- ==用命令行挂载重启后会失效==
### 虚拟机增加硬盘步骤5
- 永久挂载: 通过修改/etc/fstab实现挂载
- 添加完成后执行mount –a 即刻生效
# 磁盘情况查询
## 基本语法
df -h
## 查询指定目录的磁盘占用情况
### 基本语法
du -h /目录
- 查询指定目录的磁盘占用情况，默认为当前目录
- -s指定目录占用大小汇总
- -h 带计量单位
- -a 含文件
- --max-depth=1 子目录深度
- -c 列出明细的同时，增加汇总值