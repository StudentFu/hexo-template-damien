---
title: 【Linux教程学习笔记】20.Linux进程管理
date: 2018-11-20 17:36:54
tags: 
	- linux
categories: 操作系统
---
# 进程管理
## 基本介绍
- 在LINUX中，每个执行的程序（代码）都称为一个进程。每一个进程都分配一个ID号。
- 每一个进程，都会对应一个父进程，而这个父进程可以复制多个子进程。例如www服务器。
- 每个进程都可能以两种方式存在的。前台与后台，所谓前台进程就是用户目前的屏幕上可以进行操作的。后台进程则是实际在操作，但由于屏幕上无法看到的进程，通常使用后台方式执行。
- 一般系统的服务都是以后台进程的方式存在，而且都会常驻在系统中。直到关机才才结束。
## 显示系统执行的进程
### 基本介绍
ps命令是用来查看目前系统中，有哪些正在执行，以及它们执行的状况。
可以不加任何参数.

![image](http://image.damienzhong.com/ps%E4%BF%A1%E6%81%AF%E9%80%89%E9%A1%B9.png)
### ps详解
- 指令：ps –aux|grep xxx ，比如我看看有没有sshd服务
- 指令说明
  - System V展示风格
  - USER：用户名称
  - PID：进程号
  - %CPU：进程占用CPU的百分比
  - %MEM：进程占用物理内存的百分比
  - VSZ：进程占用的虚拟内存大小（单位：KB）
  - RSS：进程占用的物理内存大小（单位：KB）
  - TT：终端名称,缩写.
  - STAT：进程状态，其中S-睡眠，s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等
  - STARTED：进程的启动时间
  - TIME：CPU时间，即进程使用CPU的总时间
  - COMMAND：启动进程所用的命令和参数，如果过长会被截断显示
### 应用实例
要求：以全格式显示当前所有的进程，查看进程的父进程。
- ps -ef是以全格式显示当前所有的进程
- -e 显示所有进程。-f 全格式。
- ps -ef|grep xxx
  - 是BSD风格
  - UID：用户ID
  - PID：进程ID
  - PPID：父进程ID
  - C：CPU用于计算执行优先级的因子。数值越大，表明进程是CPU密集型运算，执行优先级会降低；数值越小，表明进程是I/O密集型运算，执行优先级会提高
  - STIME：进程启动的时间
  - TTY：完整的终端名称
  - TIME：CPU时间
  - CMD：启动进程所用的命令和参数
## 终止进程kill和killall
### 介绍
若是某个进程执行一半需要停止时，或是已消了很大的系统资源时，此时可以考虑停止该进程。使用kill命令来完成此项任务。
### 基本语法
- kill [选项] 进程号（功能描述：通过进程号杀死进程）
- killall 进程名称（功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用）
#### 常用选项
-9 :表示强迫进程立即停止
## 查看进程树pstree
### 基本语法
pstree [选项] ,可以更加直观的来看进程信息
#### 常用选项
- -p :显示进程的PID
- -u :显示进程的所属用户
## 服务(service)管理
服务(service) 本质就是进程，但是是运行在后台的，通常都会监听某个端口，等待其它程序的请求，比如(mysql , sshd 防火墙等)，因此我们又称为守护进程，是Linux中非常重要的知识点。
### service管理指令
- service 服务名[start | stop | restart | reload | status]
- 在CentOS7.0后不再使用service ,而是systemctl
### 查看服务名
- 方式1：使用setup -> 系统服务就可以看到。
- 方式2: /etc/init.d/服务名称
## 服务的运行级别(runlevel)
查看或者修改默认级别：vi /etc/inittab

Linux系统有7种运行级别(runlevel)：常用的是级别3和5
- 运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动
- 运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆
- 运行级别2：多用户状态(没有NFS)，不支持网络
- 运行级别3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式
- 运行级别4：系统未使用，保留
- 运行级别5：X11控制台，登陆后进入图形GUI模式
- 运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动
#### 开机的流程说明
![image](http://image.damienzhong.com/linux%E5%BC%80%E6%9C%BA%E7%9A%84%E6%B5%81%E7%A8%8B%E8%AF%B4%E6%98%8E.png)
## chkconfig指令
通过chkconfig 命令可以给每个服务的各个运行级别设置自启动/关闭
### 基本语法
1) 查看服务chkconfig --list|grep xxx
2) chkconfig 服务名--list
3) chkconfig --level 5 服务名on/off
### 使用细节
chkconfig重新设置服务后自启动或关闭，需要重启机器reboot才能生效.
## 动态监控进程
top与ps命令很相似。它们都用来显示正在执行的进程。Top与ps最大的不同之处，在于top在执行一段时间可以更新正在运行的的进程。
### 基本语法
top [选项]
### 选项说明
![image](http://image.damienzhong.com/top%E9%80%89%E9%A1%B9%E8%AF%B4%E6%98%8E.png)
### 交互操作说明
![image](http://image.damienzhong.com/top%E4%BA%A4%E4%BA%92%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E.png)
### 应用实例
案例1.监视特定用户
- top：输入此命令，按回车键，查看执行的进程。
- u：然后输入“u”回车，再输入用户名，即可
案例2：终止指定的进程。
- top：输入此命令，按回车键，查看执行的进程。
- k：然后输入“k”回车，再输入要结束的进程ID号
## 查看系统网络情况netstat
### 基本语法
netstat [选项]
### 选项说明
- -an 按一定顺序排列输出
- -p 显示哪个进程在调用
## 检测主机连接命令ping
是一种网络检测检测工具，它主要是用检测远程主机是否正常，或是两部主机间的介质是否为断、网线是否脱落或网卡故障。

如: ping 对方ip地址